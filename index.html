<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chess Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        table {
            border-collapse: collapse;
            outline: 1px solid black;
            margin-top: 20px;
        }

        th, td {
            width: 80px;
            height: 80px;
            text-align: center;
            font-size: 50px;
            cursor: pointer;
        }

        th {
            background: lightgray;
            height: 40px;
        }

        tr:nth-child(even) td:nth-child(odd),
        tr:nth-child(odd) td:nth-child(even) {
            background: #bbb;
        }

        .controls {
            margin: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .status {
            margin: 10px;
            font-size: 20px;
            text-align: center;
        }

        /* Piece styling */
        .cell {
            position: relative;
        }

        .cell[data-piece='w']::before {
            content: attr(data-piece);
            color: black; /* Black pieces for white side */
        }

        .cell[data-piece='b']::before {
            content: attr(data-piece);
            color: white; /* White pieces for black side */
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            table {
                font-size: 30px;
            }

            th, td {
                width: 60px;
                height: 60px;
            }
        }
    </style>
    <!-- Include the chess.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
</head>
<body>
    <div class="controls">
        <button id="resign">Resign</button>
        <button id="draw">Draw</button>
        <div class="status" id="status"></div>
    </div>
    <table>
        <tr>
            <th></th>
            <th>A</th>
            <th>B</th>
            <th>C</th>
            <th>D</th>
            <th>E</th>
            <th>F</th>
            <th>G</th>
            <th>H</th>
            <th></th>
        </tr>
        <tr>
            <th>8</th>
            <td class="cell" data-pos="a8" data-piece="♜"></td>
            <td class="cell" data-pos="b8" data-piece="♞"></td>
            <td class="cell" data-pos="c8" data-piece="♝"></td>
            <td class="cell" data-pos="d8" data-piece="♛"></td>
            <td class="cell" data-pos="e8" data-piece="♚"></td>
            <td class="cell" data-pos="f8" data-piece="♝"></td>
            <td class="cell" data-pos="g8" data-piece="♞"></td>
            <td class="cell" data-pos="h8" data-piece="♜"></td>
            <th>8</th>
        </tr>
        <tr>
            <th>7</th>
            <td class="cell" data-pos="a7" data-piece="♟︎"></td>
            <td class="cell" data-pos="b7" data-piece="♟︎"></td>
            <td class="cell" data-pos="c7" data-piece="♟︎"></td>
            <td class="cell" data-pos="d7" data-piece="♟︎"></td>
            <td class="cell" data-pos="e7" data-piece="♟︎"></td>
            <td class="cell" data-pos="f7" data-piece="♟︎"></td>
            <td class="cell" data-pos="g7" data-piece="♟︎"></td>
            <td class="cell" data-pos="h7" data-piece="♟︎"></td>
            <th>7</th>
        </tr>
        <tr>
            <th>6</th>
            <td class="cell" data-pos="a6"></td>
            <td class="cell" data-pos="b6"></td>
            <td class="cell" data-pos="c6"></td>
            <td class="cell" data-pos="d6"></td>
            <td class="cell" data-pos="e6"></td>
            <td class="cell" data-pos="f6"></td>
            <td class="cell" data-pos="g6"></td>
            <td class="cell" data-pos="h6"></td>
            <th>6</th>
        </tr>
        <tr>
            <th>5</th>
            <td class="cell" data-pos="a5"></td>
            <td class="cell" data-pos="b5"></td>
            <td class="cell" data-pos="c5"></td>
            <td class="cell" data-pos="d5"></td>
            <td class="cell" data-pos="e5"></td>
            <td class="cell" data-pos="f5"></td>
            <td class="cell" data-pos="g5"></td>
            <td class="cell" data-pos="h5"></td>
            <th>5</th>
        </tr>
        <tr>
            <th>4</th>
            <td class="cell" data-pos="a4"></td>
            <td class="cell" data-pos="b4"></td>
            <td class="cell" data-pos="c4"></td>
            <td class="cell" data-pos="d4"></td>
            <td class="cell" data-pos="e4"></td>
            <td class="cell" data-pos="f4"></td>
            <td class="cell" data-pos="g4"></td>
            <td class="cell" data-pos="h4"></td>
            <th>4</th>
        </tr>
        <tr>
            <th>3</th>
            <td class="cell" data-pos="a3"></td>
            <td class="cell" data-pos="b3"></td>
            <td class="cell" data-pos="c3"></td>
            <td class="cell" data-pos="d3"></td>
            <td class="cell" data-pos="e3"></td>
            <td class="cell" data-pos="f3"></td>
            <td class="cell" data-pos="g3"></td>
            <td class="cell" data-pos="h3"></td>
            <th>3</th>
        </tr>
        <tr>
            <th>2</th>
            <td class="cell" data-pos="a2" data-piece="♙"></td>
            <td class="cell" data-pos="b2" data-piece="♙"></td>
            <td class="cell" data-pos="c2" data-piece="♙"></td>
            <td class="cell" data-pos="d2" data-piece="♙"></td>
            <td class="cell" data-pos="e2" data-piece="♙"></td>
            <td class="cell" data-pos="f2" data-piece="♙"></td>
            <td class="cell" data-pos="g2" data-piece="♙"></td>
            <td class="cell" data-pos="h2" data-piece="♙"></td>
            <th>2</th>
        </tr>
        <tr>
            <th>1</th>
            <td class="cell" data-pos="a1" data-piece="♖"></td>
            <td class="cell" data-pos="b1" data-piece="♘"></td>
            <td class="cell" data-pos="c1" data-piece="♗"></td>
            <td class="cell" data-pos="d1" data-piece="♕"></td>
            <td class="cell" data-pos="e1" data-piece="♔"></td>
            <td class="cell" data-pos="f1" data-piece="♗"></td>
            <td class="cell" data-pos="g1" data-piece="♘"></td>
            <td class="cell" data-pos="h1" data-piece="♖"></td>
            <th>1</th>
        </tr>
        <tr>
            <th></th>
            <th>A</th>
            <th>B</th>
            <th>C</th>
            <th>D</th>
            <th>E</th>
            <th>F</th>
            <th>G</th>
            <th>H</th>
            <th></th>
        </tr>
    </table>

    <script>
        const chess = new Chess();
        const statusElement = document.getElementById('status');

        document.querySelectorAll('.cell').forEach(cell => {
            cell.addEventListener('click', handleCellClick);
        });

        document.getElementById('resign').addEventListener('click', resign);
        document.getElementById('draw').addEventListener('click', draw);

        function handleCellClick(event) {
            const from = event.target.getAttribute('data-pos');
            const to = prompt('Enter move:');
            const move = chess.move({from: from, to: to, promotion: 'q'});
            if (move !== null) {
                resetBoardColors();
                updateStatus();
            } else {
                alert('Invalid move! Try again.');
            }
        }

        function resign() {
            const result = confirm('Are you sure you want to resign?');
            if (result) {
                alert(`Game over, ${chess.turn() === 'w' ? 'Black' : 'White'} wins by resignation.`);
                chess.reset();
                resetBoard();
                updateStatus();
            }
        }

        function draw() {
            const result = confirm('Do you want to offer a draw?');
            if (result) {
                alert('Draw offered.');
            }
        }

        function resetBoardColors() {
            document.querySelectorAll('.cell').forEach(cell => {
                cell.style.backgroundColor = '';
            });
        }

        function updateStatus() {
            let status = '';

            if (chess.in_checkmate()) {
                status = `Game over, ${chess.turn() === 'w' ? 'Black' : 'White'} is in checkmate.`;
            } else if (chess.in_draw()) {
                status = 'Game over, drawn position.';
            } else {
                status = `${chess.turn() === 'w' ? 'White' : 'Black'} to move`;
                if (chess.in_check()) {
                    status += ', ' + (chess.turn() === 'w' ? 'White' : 'Black') + ' is in check';
                }
            }

            statusElement.textContent = status;
        }

        function resetGame() {
            chess.reset();
            resetBoard();
            updateStatus();
        }

        function resetBoard() {
            document.querySelectorAll('.cell').forEach(cell => {
                cell.innerHTML = '';
                cell.style.backgroundColor = '';
            });

            // Set up initial board position
            const startingPosition = chess.fen().split(' ')[0];
            const pieces = {
                'p': '&#9817;',
                'r': '&#9814;',
                'n': '&#9816;',
                'b': '&#9815;',
                'q': '&#9813;',
                'k': '&#9812;'
            };

            startingPosition.split('/').forEach((row, rowIndex) => {
                let colIndex = 0;
                row.split('').forEach(char => {
                    if (!isNaN(char)) {
                        colIndex += parseInt(char);
                    } else {
                        const color = char === char.toUpperCase() ? 'w' : 'b';
                        const piece = pieces[char.toLowerCase()];
                        const cell = document.querySelector(`.cell[data-pos="${String.fromCharCode(97 + colIndex)}${8 - rowIndex}"]`);
                        if (cell) {
                            cell.setAttribute('data-piece', piece); // Set data-piece attribute for styling
                        }
                        colIndex++;
                    }
                });
            });
        }

        resetBoard();
        updateStatus();
    </script>
</body>
</html>
